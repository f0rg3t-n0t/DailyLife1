<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>zzapGame</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet"/>
  <style>
    body {
      font-family: 'Noto Sans KR', sans-serif;
      background-color: #f5f5f5;
      color: black;
      text-align: center;
      padding: 2em;
    }
    .hidden { display: none; }

#user-display {
  position: fixed;
  top: 10px;
  left: 10px;
  z-index: 9999;
  display: flex;
  align-items: center;
  background-color: #F5F5F5;
  padding: 8px 12px;
  border-radius: 8px;
  box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.15);
  font-family: monospace;
  color: #3F40D3;
  border: 1px solid #ddd;
  min-width: 180px;
}

#persistent-nav {
  position: fixed;
  top: 110px;
  left: 10px;
  z-index: 9999;
  display: none;
  flex-direction: column;
  gap: 4px; /* ë²„íŠ¼ ì‚¬ì´ ê°„ê²© ì¤„ì„ */
  background-color: #F5F5F5;
  padding: 6px 8px; /* ë„¤ëª¨ ìì²´ ì—¬ë°± ì¤„ì„ */
  border-radius: 6px;
  box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.15);
  border: 1px solid #ddd;
  min-width: 140px; /* í­ë„ ì‘ê²Œ */
}

#persistent-nav button {
  background-color: #3F40D3;
  color: white;
  border: none;
  border-radius: 4px;
  padding: 4px 6px;     /* ë²„íŠ¼ ë‚´ë¶€ ì—¬ë°± ì¤„ì„ */
  margin: 0;            /* ë²„íŠ¼ ì™¸ë¶€ ì—¬ë°± ì œê±° */
  cursor: pointer;
  font-family: inherit;
  font-size: 12px;      /* ê¸€ì í¬ê¸° ì¤„ì„ */
  transition: background-color 0.2s ease;
}

#persistent-nav button:hover {
  background-color: #2c2db2;
}

#barcode-icon {
  width: 60px;
  height: 40px;
  margin-right: 10px;
}

#user-text > div {
  font-size: 14px;
  line-height: 1.4;
  color: #3F40D3;  /* í˜¹ì‹œ ìƒì†ì´ ì•ˆ ë  ìˆ˜ë„ ìˆìœ¼ë‹ˆ ëª…ì‹œ */
}
    #bgm-player {
      position: fixed;
      top: 10px;
      right: 10px;
      background: rgba(255, 255, 255, 0.8);
      padding: 10px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }
    #bgm-player button {
      background-color: #3f40d3 !important;
      color: white;
    }

    .fade-in {
      animation: fadein 1.2s ease-in;
            }
  
    @keyframes fadein {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    .typewriter {
      font-weight: bold;
      font-size: 1.1em;
      white-space: nowrap;
      overflow: hidden;
      border-right: 2px solid #3f40d3;
      width: 0;
      animation: typing 3s steps(30, end) forwards, blink 0.75s step-end infinite;
      margin-bottom: 1em;
    }

    @keyframes typing {
      from { width: 0; }
      to { width: 100%; }
    }

    @keyframes blink {
      50% { border-color: transparent; }
    }
    
    button {
      font-size: 1em;
      padding: 10px 20px;
      margin: 10px;
      border: none;
      background-color: #3f40d3;
      color: white;
      border-radius: 10px;
      cursor: pointer;
    }
    button:hover {
      background-color: #2c2db2;
    }
    .nav-button {
      background-color: #444 !important;
      font-size: 0.85em !important;
      padding: 5px 12px !important;
    }
    .logo {
      width: 200px;
      margin-bottom: 1em;
    }
  </style>
</head>

<!-- !!!!ì—¬ê¸°ì„œë¶€í„° BODY!!!! -->
<body>
  <!-- ìœ ì € ë””ìŠ¤í”Œë ˆì´ -->
<div id="user-display">
  <img src="zzapbarcode.png" alt="barcode" id="barcode-icon">
  <div id="user-text">
    <p id="user-class-line">User ID : UNKNOWN</p>
    <p id="coin-line">Coin : ???</p>
  </div>
</div>
  <!-- ë¸Œê¸ˆ í”Œë ˆì´ì–´ -->
  <div id="bgm-player">
    <audio id="bgm" src="zzapbgm.m4a" loop></audio>
    <button onclick="document.getElementById('bgm').play()">â–¶</button>
    <button onclick="document.getElementById('bgm').pause()">â¸</button>
  </div>
  
  <!-- ë¡œê³  -->
  <img class="logo" src="zzaplogo.png"/>
  
  <!-- ë‚´ë¹„ê²Œì´ì…˜ -->
  <div id="persistent-nav">
  <button onclick="goTo('main-page-2nd')">ë©”ì¸ í™”ë©´</button>
  <button onclick="goTo('guide')">ì¡°ì‚¬ ê°€ì´ë“œ</button>
  <button onclick="goTo('starting-point')">ê±´ë¬¼ ì…êµ¬ë¡œ</button>
</div>
  
<!-- main-page ë²„íŠ¼ ì´ë¯¸ì§€ ë°°ì¹˜ -->
<div id="main-page" class="hidden" style="position: relative; height: 100vh; background-color: #f5f5f5;">
  <!-- Initiation -->
  <img src="initiation.png" class="menu-button initiation" loading="lazy" onclick="goTo('starting-point')" alt="ì‹œì‘">
  <!-- Guide -->
  <img src="guide.png" class="menu-button guide" loading="lazy" onclick="goTo('guide')" alt="ê°€ì´ë“œ">
  <!-- Report -->
  <img src="report.png" class="menu-button report" loading="lazy" onclick="goTo('report')" alt="ì¢…ë£Œ">
</div>
<style>
  .menu-button {
    position: absolute;
    cursor: pointer;
    transform-style: preserve-3d;
    transform: translateX(0) scale(1); /* ì• ë‹ˆë©”ì´ì…˜ ìµœì¢… ìœ„ì¹˜ */
    transition: transform 0.4s ease;
    opacity: 0;
    pointer-events: none; /* ì• ë‹ˆë©”ì´ì…˜ ëë‚  ë•Œê¹Œì§€ hover ë°©ì§€ */
  }
  /* Initiation ë²„íŠ¼ */
  .initiation {
    top: 1%;
    left: 39%;
    width: 12%;
    height: auto;
    animation-name: slideInLeft;
    animation-duration: 1.2s;
    animation-delay: 0.2s;
    animation-fill-mode: forwards;
    animation-timing-function: ease-out;
  }
  /* Guide ë²„íŠ¼ */
  .guide {
    top: 17%;
    right: 40%;
    width: 14%;
    height: auto;
    animation-name: slideInRight;
    animation-duration: 1.2s;
    animation-delay: 0.3s;
    animation-fill-mode: forwards;
    animation-timing-function: ease-out;
  }

  /* Report ë²„íŠ¼ */
  .report {
    top: 36%;
    left: 39%;
    width: 15%;
    height: auto;
    animation-name: slideInLeft;
    animation-duration: 1.2s;
    animation-delay: 0.4s;
    animation-fill-mode: forwards;
    animation-timing-function: ease-out;
  }

  /* ë“±ì¥ ì• ë‹ˆë©”ì´ì…˜ ì •ì˜ */
  @keyframes slideInLeft {
    0% {
      transform: translateX(-80%) scale(0.9);
      opacity: 0;
    }
    100% {
      transform: translateX(0) scale(1);
      opacity: 1;
    }
  }

  @keyframes slideInRight {
    0% {
      transform: translateX(80%) scale(0.9);
      opacity: 0;
    }
    100% {
      transform: translateX(0) scale(1);
      opacity: 1;
    }
  }
/* ê³µí†µ Hover ë°œê´‘ íš¨ê³¼ */
.initiation:hover,
.guide:hover,
.report:hover {
  filter: drop-shadow(0 0 8px rgba(63, 64, 211, 0.6)); /* #3F40D3 ê³„ì—´ ë¹› */
  transition: filter 0.4s ease-in-out;
}

</style>

<!-- !!!!ì—¬ê¸°ì„œë¶€í„° ì‘ë™ì‹œí‚¬ í˜ì´ì§€ë“¤!!!! -->
  <!-- ë¡œê·¸ì¸ í™”ë©´ -->
  <div id="login-page">
    <p>IDë¥¼ ì…ë ¥í•˜ì„¸ìš”.</p>
    <input id="id-input" type="text" />
    <button onclick="checkLogin()">í™•ì¸</button>
    <p id="login-error" style="color: #ff4444;"></p>
  </div>

    <!-- guide í˜ì´ì§€ -->
<div id="guide" class="hidden" style="padding: 3em; text-align: left; text-align: left; max-width: 700px; margin: 0 auto; background: white; border: 3px solid #3f40d3; border-radius: 10px; color: black;">
  <p><span style="font-weight: bold; color: #3f40d3;">ì¡°ì‚¬ ê°€ì´ë“œ</span><br><br><br>
    í´ë¦­(ëª¨ë°”ì¼ì˜ ê²½ìš° í„°ì¹˜)ìœ¼ë¡œ ì§„í–‰í•©ë‹ˆë‹¤. ììœ ë¡­ê²Œ ì¢…ë£Œí•˜ê³  ì¬ì‹¤í–‰í•˜ì…”ë„ ì¢‹ì§€ë§Œ, ì°½ì„ ë‹«ê±°ë‚˜ ìƒˆë¡œê³ ì¹¨í•  ì‹œ ì§„í–‰ ê²½ê³¼ê°€ ì´ˆê¸°í™”ë˜ë‹ˆ ì£¼ì˜í•´ ì£¼ì„¸ìš”.<br>
    ë³¸ ì¡°ì‚¬ëŠ” ë³„ë„ì˜ ì„œë²„ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì„¸ì…˜ì„ ì¢…ë£Œí•˜ë©´ ê²°ê³¼ê°€ ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<br><br>
    ë©”ì¸ í™”ë©´ì—ì„œ 'ì¡°ì‚¬ ë§ˆì¹˜ê¸°â†’ì¢…ë£Œ' ë¥¼ í´ë¦­í•˜ë©´ íšë“ ì½”ì¸ì„ ì•Œë ¤ ì£¼ëŠ” ìµœì¢… í™”ë©´ì´ í‘œì‹œë©ë‹ˆë‹¤. ìµœì¢… í™”ë©´ì„ í‘œì‹œí•œ í›„ì—ëŠ” ì´ì „ìœ¼ë¡œ ëŒì•„ê°ˆ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.<br>
    ìµœì¢… í™”ë©´ì„ ìŠ¤í¬ë¦° ìº¡ì²˜í•˜ì—¬ ì´ê´„ê³„ DMìœ¼ë¡œ ë³´ë‚´ ì£¼ì‹œë©´ ì¡°ì‚¬ ì™„ë£Œ ì²˜ë¦¬ë©ë‹ˆë‹¤.</p>
    <br>
    <button class="nav-button" onclick="goBack()">ë‚˜ê°€ê¸°</button>
</div>

  <!-- ë ˆí¬íŠ¸ ì£¼ì˜ì‚¬í•­ -->
  <div id="report" class="hidden">
    <p>ëª¨ë“  ì¡°ì‚¬ë¥¼ ë§ˆì¹˜ê³  ìµœì¢… ë ˆí¬íŠ¸ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤. ì§„í–‰í•  ì‹œ ì´ì „ ë‹¨ê³„ë¡œ ë˜ëŒì•„ê°ˆ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.<br>ì¡°ì‚¬ë¥¼ ë§ˆì¹ ê¹Œìš”?</p>
    <button onclick="loadFinalReport()">ì¡°ì‚¬ë¥¼ ë§ˆì¹œë‹¤</button>
    <button onclick="goBack()">ì·¨ì†Œ</button>
  </div>

    <!-- ë ˆí¬íŠ¸ -->
  <div id="finalreport" class="hidden">
    <p>í í </p>
  </div>
  
  <!-- ë’¤ë¡œê°€ê¸° ì ìš©ëœ ë©”ì¸ í˜ì´ì§€ -->
<div id="main-page-2nd" class="hidden" style="position: relative; height: 100vh; background-color: #f5f5f5;">
  <!-- Initiation -->
  <img src="initiation.png" class="menu-button initiation" onclick="goBack()" alt="ì‹œì‘">
  <!-- Guide -->
  <img src="guide.png" class="menu-button guide" onclick="goTo('guide')" alt="ê°€ì´ë“œ">
  <!-- Report -->
  <img src="report.png" class="menu-button report" onclick="goTo('report')" alt="ì¢…ë£Œ">
  </div>
  
  <!-- ìŠ¤íƒ€íŒ… í¬ì¸íŠ¸ -->  
  <div id="starting-point" class="hidden">
    <p><span style="font-weight: bold;">[ê±´ë¬¼ ì…êµ¬]</span><br><br>í° ê´€ì„ ì—°ìƒì‹œí‚¤ëŠ” ê±´ë¬¼ì˜ ì…êµ¬ì— ë‹¤ë‹¤ë¥¸ë‹¤.<br>ëŒë¡œ ëœ ì •ë¬¸ í‘œë©´ì—ëŠ” ì•Œ ìˆ˜ ì—†ëŠ” ë¬¸ìê°€ ë¹¼ê³¡íˆ ìŒê°ìœ¼ë¡œ ìƒˆê²¨ì ¸ ìˆë‹¤. ë¬´ì—‡ì„ ê¸°ë¡í•œ ê²ƒì¸ì§€ëŠ” ì•Œ ìˆ˜ ì—†ì§€ë§Œ ì´ìœ  ëª¨ë¥¼ ê¹Šì´ì™€ ì¥ì—„í•¨ì´ ëŠê»´ì§„ë‹¤.<br>ì´ ì…êµ¬ë¥¼ ê¸°ì  ì‚¼ì•„ ê±´ë¬¼ ì•ˆìœ¼ë¡œ ë“¤ì–´ê°€ê±°ë‚˜, ì„¬ì˜ ì‹œì„¤ë¬¼ì„ ë‘˜ëŸ¬ë³´ê³  ëŒì•„ì˜¬ ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤.</p>
    <button onclick="goToWithSound('inside', 'zzapwalk_inside.wav')">ê±´ë¬¼ ì•ˆìœ¼ë¡œ ë“¤ì–´ê°„ë‹¤</button>
    <button onclick="goTo('outside')">ê±´ë¬¼ ë°–ìœ¼ë¡œ ë‚˜ê°„ë‹¤</button>
  </div>

  <!-- ë‚´ë¶€ 1ì¸µ --> 
  <div id="inside" class="hidden">
    <p><span style="font-weight: bold;">[ê±´ë¬¼ 1ì¸µ]</span><br><br>ëŒ€ë¦¬ì„ ë°”ë‹¥ì´ ë°˜ì§ê±°ë¦¬ëŠ” ê±´ë¬¼ 1ì¸µ. ì •ë©´ì— ë°©ë¬¸ê°ì„ ë§ì´í•˜ëŠ” <span style="color: #3f40d3;">ë¡œë¹„</span>ê°€ ë³´ì´ê³ , ë¡œë¹„ ì¢Œì¸¡ê³¼ ìš°ì¸¡ìœ¼ë¡œ ê¸´ ë³µë„ê°€ ë»—ì–´ë‚˜ê°„ë‹¤. ì™¼ìª½ì€ <span style="color: #3f40d3;">'ë ˆìŠ¤í† ë‘'</span>, ì˜¤ë¥¸ìª½ì€ <span style="color: #3f40d3;">'ë‚´ë¹ˆìš© ê°ì‹¤'</span>.</p>
    <button onclick="goToWithSound('restaurant', 'zzapwalk_inside.wav')">ë ˆìŠ¤í† ë‘</button>
    <button onclick="goToWithSound('lobby', 'zzapwalk_inside.wav')">ë¡œë¹„</button>
    <button onclick="goToWithSound('suite', 'zzapwalk_inside.wav')">ë‚´ë¹ˆìš© ê°ì‹¤</button><br>
    <button class="nav-button" onclick="goTo('starting-point')">ë‚˜ê°€ê¸°</button>
  </div>

    <!-- ë¡œë¹„ --> 
    <div id="lobby" class="hidden">
    <p><span style="font-weight: bold;">[ë¡œë¹„]</span><br><br>ê±´ë¬¼ì— ë“¤ì–´ì˜¤ë©´ ê°€ì¥ ë¨¼ì € ë³´ê²Œ ë˜ëŠ” ê³³.<br>ìš°ì•„í•œ ì„ì¡° <span style="color: #3f40d3;">ì¹´ìš´í„°</span>ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ë‚´ë¹ˆì„ ìœ„í•œ <span style="color: #3f40d3;">ëŒ€ê¸° ê³µê°„</span>ì´ ë§ˆë ¨ë˜ì–´ ìˆë‹¤.<br>ì¹´ìš´í„° ë’¤í¸ì—ëŠ” ìœ ë¦¬ë¡œ ëœ <span style="color: #3f40d3;">ì—˜ë¦¬ë² ì´í„°</span>ê°€ ë°°ì¹˜ë˜ì–´ ìˆì–´ ì‹œì„ ì´ ì €ì ˆë¡œ ì²œì¥ì„ í–¥í•œë‹¤.<br>ì´ ê±´ë¬¼ì€ ì—˜ë¦¬ë² ì´í„° ì£¼ë³€ì˜ ê³µê°„ì´ ë»¥ ëš«ë¦° êµ¬ì¡°ë¡œ ì„¤ê³„ëœ ëª¨ì–‘ì´ë‹¤. ì¸µê³ ê°€ ê½¤ ë†’ì•„ ë³´ì´ëŠ”ë° ëª‡ ì¸µê¹Œì§€ ìˆëŠ” ê±¸ê¹Œ...</p>
    <button onclick="goTo('counter')">ì¹´ìš´í„°</button>
    <button onclick="goTo('waitingspace')">ëŒ€ê¸° ê³µê°„</button>
    <button onclick="goTo('elevator')">ì—˜ë¦¬ë² ì´í„°</button><br>
    <button class="nav-button" onclick="goTo('inside')">ë‚˜ê°€ê¸°</button>
  </div>

    <!-- ë¡œë¹„:ì¹´ìš´í„° --> 
    <div id="counter" class="hidden">
    <p><span style="font-weight: bold;">[ë¡œë¹„]<br>[ì¹´ìš´í„°]</span><br><br>ë³´í†µì´ë¼ë©´ ì§ì›ì´ ì„œ ìˆì–´ì•¼ í•  ì¹´ìš´í„° ë„ˆë¨¸ì—ëŠ” ì•„ë¬´ë„ ì—†ë‹¤. ê°€ê¹Œì´ ë‹¤ê°€ê°€ì ê³µì¦ì¸ì˜ ëª©ì†Œë¦¬ê°€ ìš¸ë¦°ë‹¤.<br><br><em>â€ì„¬ ë‚´ë¶€ëŠ” ì˜ ëŒì•„ë³´ê³  ê³„ì‹ ê°€ìš”?â€</em><br><br><em>â€ê¼¼ê¼¼íˆ ë‘˜ëŸ¬ë´ ì£¼ì‹  ë¶„ë“¤ì„ ìœ„í•´ ì‘ì€ í€´ì¦ˆë¥¼ ì¤€ë¹„í–ˆìŠµë‹ˆë‹¤. ê¸°ë¶„ì´ ë‚´í‚¤ì‹ ë‹¤ë©´ ë§ì„ ê±¸ì–´ ì£¼ì„¸ìš”. ì ì‹œ ì‰¬ì–´ê°€ê³  ì‹¶ìœ¼ì‹¤ ë•ŒëŠ” ì¡ë‹´ì„ ì£¼ê³ ë°›ëŠ” ê²ƒë„ ì¢‹ê² ì£ .â€</em></p>
    <button onclick="goTo('notary')">ê³µì¦ì¸ê³¼ ëŒ€í™”í•˜ê¸°</button><br>
    <button class="nav-button" onclick="goTo('lobby')">ë‚˜ê°€ê¸°</button>
 </div>
    <!-- ë¡œë¹„:ì¹´ìš´í„°:notary --> 
    <div id="notary" class="hidden">
    <p><span style="font-weight: bold;">[ë¡œë¹„]<br>[ì¹´ìš´í„°]<br>[ê³µì¦ì¸]</span><br><br>ìŠ¤í”¼ì»¤ë¥¼ í†µí•´ í˜ëŸ¬ë‚˜ì˜¤ëŠ” ëª©ì†Œë¦¬ëŠ” ì •ì¤‘í•˜ê³  ë¶€ë“œëŸ½ë‹¤.<br><em>"ì–´ë–¤ ì¼ì„ ë„ì™€ë“œë¦´ê¹Œìš”?"</em></p>
    <button id="nota1" onclick="goTodel('notary1', 'nota1')">ì´ ì„¬ì— ëŒ€í•´ì„œ</button><br>
    <button id="nota2" onclick="goTodel('notary2', 'nota2')">ì´ˆì„¸ê³„ê¸‰ ê¸°ë¡ì ë¡œë ˜ì— ëŒ€í•´ì„œ</button><br>
    <button id="nota3" onclick="goTodel('notary3', 'nota3')">ê³µì¦ì¸ì— ëŒ€í•´ì„œ</button><br>
    <button onclick="goTo('notary4')">í€´ì¦ˆë¥¼ í‘¼ë‹¤</button><br><br>
    <button class="nav-button" onclick="goTo('counter')">ëŒ€í™”ë¥¼ ëë‚¸ë‹¤</button>
 </div>
    <!-- ë¡œë¹„:ì¹´ìš´í„°:notary1 --> 
    <div id="notary1" class="hidden">
    <p><span style="font-weight: bold;">[ë¡œë¹„]<br>[ì¹´ìš´í„°]<br>[ê³µì¦ì¸]</span><br><br><em>"ì´ ì„¬ì€ ë¯¸ë˜ê¸°ê´€ì—ì„œ ì´ˆì„¸ê³„ê¸‰ ì—¬ëŸ¬ë¶„ì„ ìœ„í•´ ì¤€ë¹„í•œ ì‹œì„¤ì…ë‹ˆë‹¤. ë³¸ë˜ëŒ€ë¡œë¼ë©´ ì˜¬í•´ ì•ˆì— ì™¸ë¶€ì— ì •ì‹ ê³µê°œë  ì˜ˆì •ì´ì—ˆì§€ë§Œâ€¦ ë¡œë ˜ ë‹˜ì˜ ì¶”ë„ì‹ì„ ìœ„í•´ ê³µê°œë¥¼ ì•ë‹¹ê¸°ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‹¤ ë³´ë‹ˆ ì•„ì§ ë§ˆë•…í•œ ì´ë¦„ì¡°ì°¨ ì—†ëŠ” ì¥ì†Œê°€ ë˜ì—ˆì§€ë§Œìš”. ì—¬ëŸ¬ë¶„ì´ ê³„ì‹  ë™ì•ˆ ì„¬ ì´ë¦„ ê³µëª¨ì „ì´ë¼ë„ í•˜ëŠ” ê²ƒì´ ì¢‹ì„ê¹Œìš”? í•˜í•˜â€¦"</em></p>
    <button class="nav-button" onclick="goTo('notary')">ë‹¤ë¥¸ ì´ì•¼ê¸°</button>
 </div>
    <!-- ë¡œë¹„:ì¹´ìš´í„°:notary2 --> 
    <div id="notary2" class="hidden">
    <p><span style="font-weight: bold;">[ë¡œë¹„]<br>[ì¹´ìš´í„°]<br>[ê³µì¦ì¸]</span><br><br><em>"ë¡œë ˜ ë‹˜ì€ ë¯¸ë˜ê¸°ê´€ 1ì§±ì´ì…¨ìŠµë‹ˆë‹¤ ê¸°ë¡ì— ì˜í•˜ë©´ ì‹œì† 50kmë¡œ ë‚ ì•„ë‹¤ë‹ˆëŠ” ì¼€ì´í¬ë¥¼ ë§¨ì†ìœ¼ë¡œ ìºì¹˜ ê°€ëŠ¥í•˜ì…¨ë‹¤ê³  í•´ìš” ì–´ì©Œê³ ì €ì©Œê³ "</em></p>
    <button class="nav-button" onclick="goTo('notary')">ë‹¤ë¥¸ ì´ì•¼ê¸°</button>
 </div>
    <!-- ë¡œë¹„:ì¹´ìš´í„°:notary3 --> 
    <div id="notary3" class="hidden">
    <p><span style="font-weight: bold;">[ë¡œë¹„]<br>[ì¹´ìš´í„°]<br>[ê³µì¦ì¸]</span><br><br><em>"ì €ëŠ” ë¡œë ˜ ë‹˜ì˜ ìœ ì–¸ì„ ì ˆì°¨ëŒ€ë¡œ ì§‘í–‰í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ê³µì¦ì¸ AIì…ë‹ˆë‹¤. ì´ê³³ì— ë¨¸ë¬´ë¥´ì‹œëŠ” ì—¬ëŸ¬ë¶„ì˜ í¸ì˜ë¥¼ ìœ„í•´ ì•ˆë‚´ì™€ í†µë²ˆì—­ì„ í¬í•¨í•œ ë‹¤ì–‘í•œ ì—­í• ë„ í•¨ê»˜ ìˆ˜í–‰í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì„¬ ì–´ë””ì„œë“  ë§ì„ ê±¸ì–´ ì£¼ì‹œë©´ ì‘ë‹µí•˜ê² ìŠµë‹ˆë‹¤."</em></p>
    <button id="nota3-1" onclick="goTodel('notary3-1', 'nota3-1')">AIë³´ë‹¤ëŠ” ì‚¬ëŒì´ ì¢‹ë‹¤ê³  í•­ì˜í•œë‹¤</button>
    <button id="nota3-2" onclick="goTodel('notary3-2', 'nota3-2')">ì˜ ë¶€íƒí•œë‹¤ê³  ì¸ì‚¬í•œë‹¤</button><br>
 </div>
    <!-- ë¡œë¹„:ì¹´ìš´í„°:notary3-1 --> 
    <div id="notary3-1" class="hidden">
    <p><span style="font-weight: bold;">[ë¡œë¹„]<br>[ì¹´ìš´í„°]<br>[ê³µì¦ì¸]</span><br><br><em>"ê·¸ë ‡êµ°ìš”â€¦ í¬ë§ì— ë¶€ì‘í•  ìˆ˜ ì—†ì–´ ìœ ê°ì…ë‹ˆë‹¤."</em><br><br>ê³µì¦ì¸ì€ í’€ì´ ì£½ì€ ê²ƒ ê°™ë‹¤.</p>
    <button class="nav-button" onclick="goTo('notary')">ë‹¤ë¥¸ ì´ì•¼ê¸°</button>
 </div>
    <!-- ë¡œë¹„:ì¹´ìš´í„°:notary3-2 --> 
    <div id="notary3-2" class="hidden">
    <p><span style="font-weight: bold;">[ë¡œë¹„]<br>[ì¹´ìš´í„°]<br>[ê³µì¦ì¸]</span><br><br><em>"ë„¤, ì˜ ë¶€íƒë“œë¦½ë‹ˆë‹¤. ì´ˆì„¸ê³„ê¸‰ ì—¬ëŸ¬ë¶„ì˜ í¸ì˜ë¥¼ ìœ„í•´ ìµœì„ ì„ ë‹¤í•˜ê² ìŠµë‹ˆë‹¤.â€</em><br><br>ê³µì¦ì¸ê³¼ ì¸ì‚¬ë¥¼ í•˜ì, ì–´ëŠìƒˆ ì¹´ìš´í„° ìœ„ì— ë°˜ì§ì´ëŠ” ì½”ì¸ì´ í•˜ë‚˜ ì˜¬ë¼ì™€ ìˆë‹¤. ì´ê±´ ì„ ë¬¼ì¼ê¹Œ?<br><span style="font-weight: bold;">1ì½”ì¸ì„ íšë“í–ˆë‹¤.</span></p>
    <button class="nav-button" onclick="goTo('notary')">ë‹¤ë¥¸ ì´ì•¼ê¸°</button>
 </div>
      <!-- ë¡œë¹„:ì¹´ìš´í„°:notary4 --> 
    <div id="notary4" class="hidden">
    <p><span style="font-weight: bold;">[ë¡œë¹„]<br>[ì¹´ìš´í„°]<br>[ê³µì¦ì¸]</span><br><br><em>"ê·¸ëŸ¼ ë¬¸ì œì…ë‹ˆë‹¤. ì´ˆì„¸ê³„ê¸‰ ê¸°ë¡ì ì„¸ì„¸ ë‹˜ì˜ ìƒë…„ì›”ì¼ì„ ì•„ì‹œëŠ”ì§€ìš”?"</em><br><br>8ìë¦¬ ìˆ«ìë¡œ ëŒ€ë‹µí•˜ì.</p>
    <input type="text" id="secret-code-input">
    <div id="codebox">
    <button onclick="checkSecretCode()">í™•ì¸</button>
  </div>
    <p id="secret-code-result"></p>
    <button class="nav-button" onclick="goTo('notary')">ë‹¤ë¥¸ ì´ì•¼ê¸°</button>
 </div>
      <!-- ë¡œë¹„:ì¹´ìš´í„°:notary5 --> 
    <div id="notary5" class="hidden">
    <p><span style="font-weight: bold;">[ë¡œë¹„]<br>[ì¹´ìš´í„°]<br>[ê³µì¦ì¸]</span><br><br><em>"ì •ë‹µì…ë‹ˆë‹¤! ê½¤ ë¨¼ ê³³ê¹Œì§€ ë‘˜ëŸ¬ë³´ì…¨êµ°ìš”.â€</em><br><br>ì§ì§ì§, ë°•ìˆ˜ ì†Œë¦¬ê°€ ìš¸ë¦¬ë‚˜ ì‹¶ë”ë‹ˆ ì–´ëŠìƒˆ ì¹´ìš´í„° ìœ„ì— ë™ì „ ë‘ ê°œê°€ ë†“ì—¬ ìˆë‹¤. í€´ì¦ˆë¥¼ ë§íŒ ë³´ìƒì¸ ê²ƒ ê°™ë‹¤.<br><span style="font-weight: bold;">2ì½”ì¸ì„ íšë“í–ˆë‹¤.</span></p>
    <button class="nav-button" onclick="goTo('notary')">ë‹¤ë¥¸ ì´ì•¼ê¸°</button>
 </div>
  
    <!-- ë¡œë¹„:ëŒ€ê¸° ê³µê°„ --> 
    <div id="waitingspace" class="hidden">
    <p><span style="font-weight: bold;">[ë¡œë¹„]<br>[ëŒ€ê¸° ê³µê°„]</span><br><br>ê³µì‚¬ì¤‘.</p>
    <button class="nav-button" onclick="goTo('lobby')">ë‚˜ê°€ê¸°</button>
 </div>
  
    <!-- ë¡œë¹„:ì—˜ë¦¬ë² ì´í„° --> 
    <div id="elevator" class="hidden">
    <p><span style="font-weight: bold;">[ë¡œë¹„]<br>[ì—˜ë¦¬ë² ì´í„°]</span><br><br>ì•„ì•—~ ê³µì‚¬ì¤‘ì´ë¼ì„œ ì´ìš©í•  ìˆ˜ ì—†ì–´! ëŒ€ì‹  ì—˜ë²  ë°”ë‹¥ì´ë¼ë„ ìƒ…ìƒ…ì´ ë’¤ì ¸ë³´ì!</p>
    <button id="elevatorbutton" onclick="goTodel('elevator1', 'elevatorbutton')">ìƒ…ìƒ…ì´ ë’¤ì§„ë‹¤</button><br>
    <button class="nav-button" onclick="goTo('lobby')">ë‚˜ê°€ê¸°</button>
 </div>      
      <!-- ë¡œë¹„:ì—˜ë¦¬ë² ì´í„°:íƒìƒ‰ --> 
    <div id="elevator1" class="hidden">
    <p><span style="font-weight: bold;">[ë¡œë¹„]<br>[ì—˜ë¦¬ë² ì´í„°]</span><br><br>ì™€~ ì½”ì¸ì„ í•˜ë‚˜ ì°¾ì•˜ì–´~ ëŒ€ë°•ëŒ€ë°•~<br><span style="font-weight: bold;">1ì½”ì¸ì„ íšë“í–ˆë‹¤!</span></p>
    <button class="nav-button" onclick="goTo('starting-point')">ê±´ë¬¼ ì…êµ¬ë¡œ ëŒì•„ê°€ê¸°</button>
    <button class="nav-button" onclick="goTo('lobby')">ë‚˜ê°€ê¸°</button>
 </div>     
  
    <!-- ë ˆìŠ¤í† ë‘ --> 
    <div id="restaurant" class="hidden">
    <p><span style="font-weight: bold;">[ë ˆìŠ¤í† ë‘]</span><br><br>ê³µì‚¬ì¤‘.<br>ì¡°ë¦¬ì‹¤ ê°™ì€ ê±¸ ë„£ë‚˜...</p>
    <button class="nav-button" onclick="goTo('inside')">ë‚˜ê°€ê¸°</button>
  </div>

    <!-- ë‚´ë¹ˆìš© ê°ì‹¤ --> 
    <div id="suite" class="hidden">
    <p><span style="font-weight: bold;">[ë‚´ë¹ˆìš© ê°ì‹¤]</span><br><br>ì´ ìë¦¬ì— ì´ˆì²­ëœ ì´ˆì„¸ê³„ê¸‰ë“¤ì´ í¸íˆ ì‰´ ìˆ˜ ìˆë„ë¡ ê°œì¸ì‹¤ì´ ì¤€ë¹„ë˜ì–´ ìˆë‹¤. ë²Œì¨ ë“¤ì–´ê°€ì„œ ì‰¬ê¸°ì—ëŠ” ê¸°ê» ë‚˜ì˜¨ ë³´ëŒì´ ì—†ë‹¤!</p>
    <button class="nav-button" onclick="goTo('inside')">ë‚˜ê°€ê¸°</button>
  </div>
  
    <!-- ë°”ê¹¥ 1ì¸µ --> 
    <div id="outside" class="hidden">
    <p><span style="font-weight: bold;">[ê±´ë¬¼ ë°”ê¹¥]</span><br><br>ì†Œê¸ˆê¸° ì„ì¸ ë°”ëŒì´ ì €í¸ì—ì„œë¶€í„° ë¶ˆì–´ì˜¨ë‹¤. ë°”ê¹¥ì€ ë”í•  ë‚˜ìœ„ ì—†ì´ í‰í™”ë¡­ë‹¤.<br>ê±´ë¬¼ì—ì„œ ë‚˜ê°€ëŠ” ê¸¸ì„ ì­‰ ë”°ë¼ê°€ë©´ <span style="color: #3f40d3;">í•­êµ¬</span>ë¡œ ì´ì–´ì§„ë‹¤.<br>í•­êµ¬ì—ì„œ ì¡°ê¸ˆ ë–¨ì–´ì§„ ê³³ì— <span style="color: #3f40d3;">ë©”ëª¨ë¦¬ì–¼ íŒŒí¬</span>ê°€ ìœ„ì¹˜í•´ ìˆê³ , ë¬˜ì§€ì—ì„œ ì„¬ ë’¤í¸ìœ¼ë¡œ ì´ì–´ì§€ëŠ” <span style="color: #3f40d3;">ì‚°ì±…ë¡œ</span>ê°€ í¬ë¯¸í•˜ê²Œ ë³´ì¸ë‹¤.</p>
    <button onclick="goToWithSound('port', 'zzapwalk_seaside.wav')">í•­êµ¬</button>
    <button onclick="goToWithSound('memorial', 'zzapwalk_seaside.wav')">ë©”ëª¨ë¦¬ì–¼ íŒŒí¬</button>
    <button onclick="goToWithSound('street', 'zzapwalk_seaside.wav')">ì‚°ì±…ë¡œ</button><br>
    <button class="nav-button" onclick="goTo('starting-point')">ê±´ë¬¼ ì…êµ¬ë¡œ ëŒì•„ê°€ê¸°</button>
  </div>

    <!-- í•­êµ¬ --> 
    <div id="port" class="hidden">
    <p><span style="font-weight: bold;">[í•­êµ¬]</span><br><br>ê³µì‚¬ì¤‘.<br>ê³§ í­íŒŒë  ì˜ˆì •ì´ë‹¤. ì•„ë§ˆ ë°±ì‚¬ì¥ì„ ì¶”ê°€.</p>
    <button class="nav-button" onclick="goTo('outside')">ë‚˜ê°€ê¸°</button>
  </div>


    <!-- ë©”ëª¨ë¦¬ì–¼ íŒŒí¬ --> 
    <div id="memorial" class="hidden">
    <p><span style="font-weight: bold;">[ë©”ëª¨ë¦¬ì–¼ íŒŒí¬ ì…êµ¬]</span><br><br>í° ìš¸íƒ€ë¦¬ë¡œ ë‘˜ëŸ¬ì‹¸ì—¬ êµ¬íšì§€ì–´ì§„ ê³µê°„ì´ ë°”ë‹¤ì™€ ì ‘í•˜ê³  ìˆë‹¤.<br>ì¡°ê¸ˆì€ ì—„ìˆ™í•œ ê¸°ë¶„ì´ ë“¤ì§€ë„...</p>
    <button onclick="goToWithSoundNL('memorial1', 'zzapsea.mp3')">ë©”ëª¨ë¦¬ì–¼ íŒŒí¬ì— ì…ì¥í•œë‹¤</button><br>
    <button class="nav-button" onclick="goTo('outside')">ë‚˜ê°€ê¸°</button>
  </div>

      <!-- ë©”ëª¨ë¦¬ì–¼ íŒŒí¬:1 --> 
    <div id="memorial1" class="hidden">
    <p><span style="font-weight: bold;">[ë©”ëª¨ë¦¬ì–¼ íŒŒí¬]</span><br><br>ì§§ê²Œ ê¹ì¸ ì”ë”” ìœ„ë¡œ ìƒˆí•˜ì–€ ë¹„ì„ì´ í–‡ë¹›ì„ ë°˜ì‚¬í•˜ë©° ëˆˆê¸¸ì„ ëˆë‹¤.<br>ì´ê³³ì€ ì„¸ìƒì„ ë– ë‚œ ì´ˆì„¸ê³„ê¸‰ì„ ê¸°ë¦¬ëŠ” ë©”ëª¨ë¦¬ì–¼ íŒŒí¬. ë¬»íŒ ì‚¬ëŒì€ ì•„ì§ í•˜ë‚˜ë¿ì´ë‹¤.<br>ê·œì¹™ì ìœ¼ë¡œ ë“¤ë ¤ì˜¤ëŠ” íŒŒë„ ì†Œë¦¬ê°€ ì¥ì†¡ê³¡ì²˜ëŸ¼ ì”ì”íˆ íë¥¸ë‹¤.<br>ë©”ëª¨ë¦¬ì–¼ íŒŒí¬ë¥¼ ê°€ë¡œì§€ë¥´ëŠ” ê¸¸ì€ ê½ƒì´ ë§Œë°œí•œ <span style="color: #3f40d3;">í™”ì›</span>ìœ¼ë¡œ ì´ì–´ì§„ë‹¤.</p>
    <button onclick="goTo('memorial-lorem')">ë¡œë ˜ì˜ ë¬˜ë¹„</button>
    <button onclick="goTo('garden')">í™”ì›</button><br>
    <button class="nav-button" onclick="goToWithoutzzapsea('memorial')">ë‚˜ê°€ê¸°</button>
  </div>

      <!-- !!ë©”ëª¨ë¦¬ì–¼ íŒŒí¬:í™”ì› --> 
    <div id="garden" class="hidden">
    <p><span style="font-weight: bold;">[í™”ì›]</span><br><br>ì–´ì©Œê³ ì €ì©Œê³  ë¬˜ì‚¬<br>í™”ì›ì—ëŠ” í—Œí™”ìš© ê½ƒì„ ììœ ë¡­ê²Œ ê°€ì ¸ê°ˆ ìˆ˜ ìˆëŠ” ê³µê°„ì´ ìˆë‹¤. í•˜ë‚˜ ê³¨ë¼ ë³´ëŠ” ê²ƒë„ ì¢‹ê² ì§€...</p>
    <button id="flowerpick" onclick="goTodel('gardenflower', 'flowerpick')">í—Œí™”ìš© ê½ƒì„ ê³ ë¥¸ë‹¤.</button><br>
    <button class="nav-button" onclick="goTo('memorial1')">ë‚˜ê°€ê¸°</button>
  </div>

      <!-- !!ë©”ëª¨ë¦¬ì–¼ íŒŒí¬:í™”ì›:ê½ƒ --> 
    <div id="gardenflower" class="hidden">
    <p><span style="font-weight: bold;">[í™”ì›]</span><br><br>ë§ˆìŒì— ë“œëŠ” ê½ƒì„ ê³ ë¥´ì.</p>
    <button onclick="goTo('flowerobtain')">ìˆ˜êµ­</button><br>
    <button onclick="goTo('flowerobtain')">ì¥ë¯¸</button><br>
    <button onclick="goTo('flowerobtain')">êµ­í™”</button><br>
  </div>

      <!-- !!ë©”ëª¨ë¦¬ì–¼ íŒŒí¬:í™”ì›:ê½ƒ --> 
    <div id="flowerobtain" class="hidden">
    <p><span style="font-weight: bold;">[í™”ì›]</span><br><br>ì •ì„±ì„ ë“¤ì—¬ ê½ƒì„ ê³¨ëë‹¤. ì´ ì •ë„ë©´ ê´œì°®ìœ¼ë ¤ë‚˜...</p>
    <button class="nav-button" onclick="goTo('garden')">ë‚˜ê°€ê¸°</button>
  </div>

      <!-- !!ë©”ëª¨ë¦¬ì–¼ íŒŒí¬:ë¡œë ˜ì˜ ë¬˜ë¹„ --> 
    <div id="memorial-lorem" class="hidden">
    <p><span style="font-weight: bold;">[ë©”ëª¨ë¦¬ì–¼ íŒŒí¬]<br>[ë¡œë ˜ì˜ ë¬˜ë¹„]</span><br><br>2002.04.09-2025.XX.XX</p>
    <button id="flowerbtn" onclick="giveflower('flowerbtn')">í—Œí™”í•œë‹¤</button><br>
    <button class="nav-button" onclick="goToWithoutzzapsea('memorial1')">ë‚˜ê°€ê¸°</button>
  </div>

      <!-- !!ë©”ëª¨ë¦¬ì–¼ íŒŒí¬:ë¡œë ˜ì˜ ë¬˜ë¹„:í—Œí™” --> 
    <div id="flowerpage" class="hidden">
    <p><span style="font-weight: bold;">[ë©”ëª¨ë¦¬ì–¼ íŒŒí¬]<br>[ë¡œë ˜ì˜ ë¬˜ë¹„]</span><br><br>ë¬˜ë¹„ ì•ì— ê½ƒì„ ê°€ì§€ëŸ°íˆ ì˜¬ë ¤ë†“ì•˜ë‹¤. ë°”ëŒì— ê½ƒìì´ ì‚´ì§ í”ë“¤ë¦°ë‹¤.<br>ì ì‹œ ëˆˆì„ ê°ì•˜ë‹¤ ëœ¨ë‹ˆ... ì›ë˜ ì—¬ê¸° ì½”ì¸ì´ ë†“ì—¬ ìˆì—ˆë˜ê°€?<br><span style="font-weight: bold;">1ì½”ì¸ì„ íšë“í–ˆë‹¤.</span></p>
    <button class="nav-button" onclick="goToWithoutzzapsea('memorial1')">ë‚˜ê°€ê¸°</button>
  </div>

      <!-- ì‚°ì±…ë¡œ --> 
    <div id="street" class="hidden">
    <p><span style="font-weight: bold;">[ì‚°ì±…ë¡œ]</span><br><br>ê³µì‚¬ì¤‘.<br>ìì „ê±° ëŒ€ì—¬ ê°€ëŠ¥.</p>
    <button class="nav-button" onclick="goTo('outside')">ë‚˜ê°€ê¸°</button>
  </div>

<!-- !!!!ì—¬ê¸°ì„œë¶€í„° ìŠ¤í¬ë¦½íŠ¸!!!! -->
  <script>
// ì• ë‹ˆë©”ì´ì…˜ì´ ëë‚œ ë’¤ hover ì‘ë™ í—ˆìš©
  document.querySelectorAll('.menu-button').forEach(button => {
    button.addEventListener('animationend', () => {
      button.style.pointerEvents = 'auto';
    });
  });
//â˜…â˜…â˜…â˜…â˜…[ì¤‘ìš”]ìœ ì € ë°ì´í„°â˜…â˜…â˜…â˜…â˜…
    const userData = {
      mung0515: {
        class: "í”¼ìë§ˆìŠ¤í„° ìœ¼ë¯•",
        id: "ThePizzaMaster",
        STR: 2,
        INT: 5,
        OBS: 5,
        POW: 5,
        LUC: 5,
        key: 0,
        coin: 0
      }
    };

    let currentUser = null;
    let pageHistory = [];
    const outputIds = ['gym-result', 'library-result'];
    
//â˜…â˜…â˜…â˜…â˜…ë¡œê·¸ì¸â˜…â˜…â˜…â˜…â˜…
    function checkLogin() {
      const id = document.getElementById('id-input').value;
      if (userData[id]) {
        currentUser = userData[id];
        showWelcomeMessage(currentUser.class);
      } else {
        document.getElementById('login-error').innerText = "ì•„ì´ë””ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.";
      }
    }
  
//â˜…â˜…â˜…â˜…â˜…í™˜ì˜ ë©”ì‹œì§€â˜…â˜…â˜…â˜…â˜…
    function showWelcomeMessage(userClass) {
      document.getElementById('login-page').classList.add('hidden');
      const container = document.createElement('div');
      container.classList.add('typewriter');
      container.innerHTML = `ì´ˆì„¸ê³„ê¸‰ ${userClass} ë‹˜ì„ í™˜ì˜í•©ë‹ˆë‹¤. . .`;
      document.body.appendChild(container);
      setTimeout(() => {
        container.remove();
        showUserInfo();
        document.getElementById('main-page').classList.remove('hidden');
        pageHistory.push('main-page');
      }, 3600);
    }
//â˜…â˜…â˜…â˜…â˜…ìœ ì € ì¸í¬ë©”ì´ì…˜ ì°½â˜…â˜…â˜…â˜…â˜…
    function showUserInfo() {
      const userBox = document.getElementById('user-display');
      document.getElementById('user-class-line').innerHTML = `User ID: ${currentUser.id}`;
      document.getElementById('coin-line').innerText = `Coin: ${currentUser.coin || 0}`;
      userBox.classList.remove('hidden');
    }
    function updateCoinDisplay() {
      document.getElementById('coin-line').innerText = `Coin: ${currentUser.coin || 0}`;
    }
//â˜…â˜…â˜…â˜…â˜…ì¶œë ¥ëœ í…ìŠ¤íŠ¸ ì•„ì›ƒí’‹ ì°½ ë„˜ì–´ê°ˆ ë•Œ ì§€ìš°ê¸° (goTo ì—°ë™ìš©)â˜…â˜…â˜…â˜…â˜…
    function clearOutputs() {
      outputIds.forEach(id => {
        const el = document.getElementById(id);
        if (el) el.innerText = '';
      });
    }

//â˜…â˜…â˜…â˜…â˜…goToâ˜…â˜…â˜…â˜…â˜…
function goTo(page) {
  // ì°½ ì´ë™ì‹œ ìˆ¨ê²¨ì§€ì§€ ì•ŠëŠ” ë””ìŠ¤í”Œë ˆì´ ì„¤ì •
  const exceptions = ['user-display','persistent-nav','bgm-player','bgm-player button'];  
  document.querySelectorAll('div').forEach(div => {
    const isException = exceptions.includes(div.id) || div.closest('#user-display') || div.closest('#persistent-nav');
    if (!isException) {
      div.classList.add('hidden');
    }
  });
  //ì§€ìš°ê³  í˜ì´ë“œ ì¸
  const target = document.getElementById(page);
  target.classList.remove('hidden');
  target.classList.add('fade-in');
  clearOutputs();
  pageHistory.push(page);
  //[ì¤‘ìš”]íŠ¹ì • í˜ì´ì§€ ì§„ì… ì‹œ ìŠ¤íƒ¯(ì½”ì¸ ë“±)ë³€ë™
  if (['kitchen', 'elevator1', 'notary3-2','flowerpage'].includes(page)) {
    currentUser.coin = (currentUser.coin || 0) + 1;
    updateCoinDisplay();
  }
  if (['notary5'].includes(page)) {
    currentUser.coin = (currentUser.coin || 0) + 2;
    updateCoinDisplay();
  }
  if (['flowerobtain'].includes(page)) {
    currentUser.key = 1;
    updateCoinDisplay();
  }
    if (page === 'starting-point') {
    document.getElementById('persistent-nav').style.display = 'flex';
  }
  //ì–˜ë„¤ëŠ” ë²„íŠ¼ ì—†ì• ê¸°ìš©ì¸ë° ì´ë ‡ê²Œ í•˜ì§€ ë§ê³  goTodel ì‚¬ìš©ì„ ê³ ë ¤í•  ê²ƒ ...
  const flowerButton = document.getElementById('flower-button-box');
if (flowerButton) {
  // í•œ ë²ˆì´ë¼ë„ í—Œí™”í•œ ê²½ìš°ì—ëŠ” ë‹¤ì‹œ ë³´ì´ì§€ ì•ŠìŒ
  flowerButton.style.display = (page === 'flowerpage') ? 'none' : 'block';
}
  const codebox = document.getElementById('codebox');
if (page === 'notary4' && codebox) {
  const alreadyUsed = codebox.getAttribute('data-used') === 'true';
  codebox.style.display = alreadyUsed ? 'none' : 'block';
}
  document.getElementById('user-display').classList.remove('hidden');
}

//â˜…â˜…â˜…â˜…â˜…goTodel(ì´ë™ê³¼ ë™ì‹œì— ë²„íŠ¼ ì‚­ì œ)â˜…â˜…â˜…â˜…â˜…   
function goTodel(targetPage, buttonId) {
  const btn = document.getElementById(buttonId);
  if (btn) btn.remove(); // í•œ ë²ˆë§Œ ì§€ì›€
  goTo(targetPage); // ê¸°ì¡´ í˜ì´ì§€ ì´ë™ ë¡œì§ ì¬ì‚¬ìš©
}

//â˜…â˜…â˜…â˜…â˜…goToWithSound(í˜ì´ì§€ ì´ë™ ë²„íŠ¼ ëˆ„ë¥¼ ë•Œ íš¨ê³¼ìŒ(ì¼ì‹œ) ì¬ìƒ)â˜…â˜…â˜…â˜…â˜…   
  function goToWithSound(page, soundFile) {
      const audio = new Audio(soundFile);
      audio.loop = false;
      audio.volume = 0.3;
      audio.play();
      goTo(page);
    }

//â˜…â˜…â˜…â˜…â˜…goToWithSound(í˜ì´ì§€ ì´ë™ ë²„íŠ¼ ëˆ„ë¥¼ ë•Œ íš¨ê³¼ìŒ ê³„ì†í•´ì„œ ì¬ìƒ, ë£¨í”„)â˜…â˜…â˜…â˜…â˜…  
    function goToWithSoundNL(page, soundFile) {
  if (soundFile.includes('zzapsea.mp3')) {
    zzapseaAudio = new Audio(soundFile); // ì „ì—­ ë³€ìˆ˜ë¡œ ì €ì¥
    zzapseaAudio.loop = true;
    zzapseaAudio.play();
  } else {
    const audio = new Audio(soundFile);
    audio.loop = true;
    audio.play();
  }
  goTo(page);
}

//â˜…â˜…â˜…â˜…â˜…goBackâ˜…â˜…â˜…â˜…â˜…  
function goBack() {
  if (pageHistory.length > 1) {
    // í˜„ì¬ í˜ì´ì§€ ì œê±°
    pageHistory.pop();
    const prevPage = pageHistory[pageHistory.length - 1];

    // ì˜ˆì™¸ ìš”ì†Œë“¤ (ë£¨íŠ¸ + ë‚´ë¶€ í¬í•¨ ì „ë¶€ ë³´í˜¸)
    const persistentRoots = ['user-display', 'bgm-player', 'persistent-nav'];

    // ëª¨ë“  divë¥¼ ìˆ¨ê¸°ë˜, ì˜ˆì™¸ ìš”ì†Œ ë˜ëŠ” ê·¸ ìì‹ì€ ìˆ¨ê¸°ì§€ ì•ŠìŒ
    document.querySelectorAll('div').forEach(div => {
      const isPersistent = persistentRoots.some(rootId => {
        const rootEl = document.getElementById(rootId);
        return rootEl && (div === rootEl || rootEl.contains(div));
      });
      if (!isPersistent) {
        div.classList.add('hidden');
      }
    });

    // ì´ì „ í˜ì´ì§€ ë³´ì—¬ì£¼ê¸°
    const target = document.getElementById(prevPage);
    if (target) {
      target.classList.remove('hidden');
      target.classList.add('fade-in');
    }

    // í…ìŠ¤íŠ¸ ê°•ì œ ê°±ì‹  (í˜¹ì‹œë¼ë„ ë¸Œë¼ìš°ì € ìºì‹œê°€ ë‚ ë ¤ë²„ë¦° ê²½ìš°)
    if (currentUser) {
      const idLine = document.getElementById('user-class-line');
      const coinLine = document.getElementById('coin-line');
      if (idLine) idLine.innerText = `User ID: ${currentUser.id}`;
      if (coinLine) coinLine.innerText = `Coin: ${currentUser.coin || 0}`;
    }

    // ì¶œë ¥ ì˜ì—­ ì´ˆê¸°í™”
    clearOutputs();
  }
}



//â˜…â˜…â˜…â˜…â˜…í•´ë‹¹ ë²„íŠ¼ì„ ëˆ„ë¥¼ ì‹œ, í˜ì´ì§€ ì´ë™ê³¼ ë™ì‹œì— zzapseaAudio ì¤‘ì§€â˜…â˜…â˜…â˜…â˜…
function goToWithoutzzapsea(page) {
  if (zzapseaAudio && !zzapseaAudio.paused) {
    zzapseaAudio.pause();
    zzapseaAudio.currentTime = 0;
  }
  goTo(page);
}

//ì—¬ê¸°ì„œë¶€í„° íŠ¹ì • ì¥ì†Œì—ì„œ ì‚¬ìš©í•˜ë„ë¡ ë˜ì–´ ìˆëŠ” í•¨ìˆ˜!!!!
//â˜…â˜…â˜…â˜…â˜…í—Œí™”â˜…â˜…â˜…â˜…â˜…
function giveflower(buttonId) {
  if (currentUser.key === 1) {
    // ë²„íŠ¼ ì œê±°
    const btn = document.getElementById(buttonId);
    if (btn) btn.remove();  // ë‹¨ í•œ ë²ˆë§Œ ì œê±°
    goTo('flowerpage');
  } else {
    alert("ê½ƒì„ ê°€ì§€ê³  ìˆì§€ ì•Šë‹¤. ì–´ë””ì„œ êµ¬í•  ìˆ˜ ìˆì„ê¹Œ...");
  }
}
//â˜…â˜…â˜…â˜…â˜…í€´ì¦ˆâ˜…â˜…â˜…â˜…â˜…
function checkSecretCode() {
  const input = document.getElementById('secret-code-input').value;
  if (input === "20020409") { // ì›í•˜ëŠ” ì •ë‹µ
    const codebox = document.getElementById('codebox');
    if (codebox) {
      codebox.style.display = 'none';
      codebox.setAttribute('data-used', 'true');  // âœ… í•œ ë²ˆ ì‚¬ìš©í–ˆìŒì„ í‘œì‹œ
    }
    goTo('notary5');
  } else {
    const result = document.getElementById('secret-code-result');
    result.innerText = "ê³µì¦ì¸ì€ ì¹¨ë¬µí•˜ê³  ìˆë‹¤... ì•„ë¬´ë˜ë„ ì´ê²Œ ì •ë‹µì´ ì•„ë‹Œ ê²ƒ ê°™ë‹¤.";
  }
}

// ìµœì¢… ê²°ê³¼
// ğŸ”¹ Final Report Page (Typing in Hangul Jamo Units with Directional Ghost Effect)
// ğŸ”¹ Final Report Page (Typing in Hangul Jamo Units with Ghost Type + Fade)
function loadFinalReport() {
  document.body.innerHTML = '';

  const div = document.createElement('div');
  div.id = 'final-report';
  div.className = 'fade-in';
  div.style = `
    max-width: 700px;
    margin: 100px auto;
    background: white;
    border: 3px solid #3f40d3;
    border-radius: 10px;
    color: black;
    padding: 2em;
    font-family: 'Noto Sans KR', sans-serif;
    position: relative;
  `;

  const lines = [
    { html: `<em style="color: #3f40d3;">ì´ˆì„¸ê³„ê¸‰ ${currentUser.class} ë‹˜ì´ ì¡°ì‚¬ë¥¼ ì™„ë£Œí•˜ì˜€ìŠµë‹ˆë‹¤â€¦</em>`, align: 'left', style: 'color: #3f40d3; font-style: italic;' },
    { html: `<em style="color: #3f40d3;">ì¡°ì‚¬ ê²°ê³¼ ì €ì¥ ì¤‘â€¦</em>`, align: 'left', style: 'color: #3f40d3; font-style: italic;' },
    { html: `<span style="color: black;">User ID : ${currentUser.id}</span>`, align: 'left', style: 'color: black;' },
    { html: `<span style="color: black;">STR ${currentUser.STR}  INT ${currentUser.INT}  OBS ${currentUser.OBS}  POW ${currentUser.POW}  LUC ${currentUser.LUC}</span>`, align: 'left', style: 'color: black;' },
    { html: `<span style="color: black;">Coin : ${currentUser.coin}</span>`, align: 'left', style: 'color: black;' }
  ];

  if (currentUser.coin === 1) {
    lines.push({ html: `<div style="color: black; font-style: italic;">ì†ëì— ë¯¸ì„¸í•˜ê²Œ ê½ƒí–¥ê¸°ê°€ ë‚¨ì•„ ìˆë‹¤ â€¦</div>`, align: 'right', style: 'color: black; font-style: italic;' });
  }

  lines.push({ html: `<div style="color: #888">ë³¸ í˜ì´ì§€ë¥¼ ìŠ¤í¬ë¦°ìƒ·í•˜ì—¬ ì´ê´„ê³„ DMìœ¼ë¡œ ì œì¶œí•˜ë©´ ì¡°ì‚¬ ì™„ë£Œ ì²˜ë¦¬ë©ë‹ˆë‹¤.</div>`, align: 'right', style: 'color: #888;' });

  const content = document.createElement('div');
  div.appendChild(content);
  document.body.appendChild(div);

  function splitHangul(text) {
    return Array.from(text.normalize('NFD'));
  }

  let index = 0;
  function typeLine() {
    if (index < lines.length) {
      const { html: realText, align, style } = lines[index];
      const clean = realText.replace(/<[^>]+>/g, '');
      const units = splitHangul(clean);

      const container = document.createElement('div');
      container.style = `position: relative; margin-bottom: 1.5em; min-height: 1.5em; text-align: ${align};`;

      const ghost = document.createElement('div');
      ghost.className = 'ghost-line';
      ghost.style = `text-align: ${align}; ${style}`;
      container.appendChild(ghost);

      const real = document.createElement('div');
      real.className = 'typed-line';
      real.style = `text-align: ${align}; ${style}`;
      container.appendChild(real);

      content.appendChild(container);

      const lorem = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla lacinia, justo ac consequat rhoncus...';
      const loremUnits = splitHangul(lorem);

      const ghostSpan = document.createElement('span');
      ghostSpan.className = 'ghost-fade';
      ghostSpan.style = `${style}`;
      ghostSpan.dataset.align = align;
      ghost.appendChild(ghostSpan);

      let ghostFrame = 0;
      let realFrame = 0;
      const totalGhost = loremUnits.length;
      const totalReal = units.length;

      function typeBoth() {
        if (ghostFrame <= totalGhost) {
          ghostSpan.innerHTML = `<span class="ghost-text">${loremUnits.slice(0, ghostFrame).join('')}</span>`;
          ghostFrame++;
        }
        if (ghostFrame > 5 && ghostFrame <= totalGhost + 10) {
          const ghostText = ghostSpan.querySelector('.ghost-text');
          const fadePercent = (ghostFrame - 5) / (totalGhost - 5);
          ghostText.style.opacity = `${1 - fadePercent}`;
        }
        if (realFrame <= totalReal) {
          real.innerHTML = `<span style="${style}">${units.slice(0, realFrame).join('')}</span><span class="final-cursor">â–‹</span>`;
          realFrame++;
        }

        if (realFrame <= totalReal || ghostFrame <= totalGhost + 10) {
          setTimeout(typeBoth, 60);
        } else {
          ghost.innerHTML = '';
          real.innerHTML = realText;
          index++;
          setTimeout(typeLine, 600);
        }
      }

      typeBoth();
    }
  }
  typeLine();
}

const style = document.createElement('style');
style.innerHTML = `
  .ghost-line {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    font-style: italic;
    font-size: 0.95em;
    white-space: pre-wrap;
    z-index: 0;
  }
  .ghost-fade {
    display: inline-block;
    color: rgba(150, 200, 255, 0.4);
  }
  .typed-line {
    position: relative;
    z-index: 1;
    white-space: pre-wrap;
  }
  .final-cursor {
    color: #3f40d3;
    animation: blink-final 0.8s step-end infinite;
    font-weight: bold;
    margin-left: 2px;
  }
  @keyframes blink-final {
    from, to { opacity: 1; }
    50% { opacity: 0; }
  }
`;
document.head.appendChild(style);


  </script>
</body>
</html>
